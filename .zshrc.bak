# --- ENVIRONNEMENT ---
export MOZ_ENABLE_WAYLAND=1
export MOZ_USE_XINPUT2=1
export EDITOR='nvim'
export VISUAL='nvim'
export PATH="$HOME/.local/bin:$PATH"

# --- HISTORIQUE ---
HISTFILE=~/.zsh_history
HISTSIZE=10000
SAVEHIST=10000
setopt HIST_IGNORE_ALL_DUPS
setopt HIST_REDUCE_BLANKS

# --- OPTIONS ZSH ---
setopt AUTO_CD
setopt CORRECT

# --- PLUGINS ---
source /usr/share/zsh/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh
source /usr/share/zsh/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh

# --- FONCTIONS ---
mkcd() {
    mkdir -p "$1" && cd "$1"
}
update() {
    local comment="${1:-Update manuelle}"
    
    echo "--- Snapshot creation : $comment ---"
    sudo timeshift --create --comments "$comment" && paru -Syu
}

# --- INITIALISATION ---
eval "$(zoxide init zsh)"
eval "$(starship init zsh)"
eval "$(fnm env --use-on-cd)"

# --- FZF ---
[ -f /usr/share/fzf/key-bindings.zsh ] && source /usr/share/fzf/key-bindings.zsh
[ -f /usr/share/fzf/completion.zsh ] && source /usr/share/fzf/completion.zsh

# --- NAVIGATION ---
zstyle ':completion:*' matcher-list 'm:{a-z}={A-Z}' 

# --- KEYBINDS ---
autoload -U up-line-or-beginning-search
autoload -U down-line-or-beginning-search
zle -N up-line-or-beginning-search
zle -N down-line-or-beginning-search
bindkey '^P' up-line-or-beginning-search 
bindkey '^N' down-line-or-beginning-search
bindkey '^I' autosuggest-accept

# pnpm
export PNPM_HOME="/home/aed/.local/share/pnpm"
case ":$PATH:" in
  *":$PNPM_HOME:"*) ;;
  *) export PATH="$PNPM_HOME:$PATH" ;;
esac
# pnpm end

# --- ALIAS ---
alias c='clear'
alias ls='eza --icons --group-directories-first'
alias cd='z'
alias cat='bat --paging=never'
alias grep='rg'
alias find='fd'
alias vim='nvim'
alias ex='ouch decompress'
alias compress='ouch compress'
